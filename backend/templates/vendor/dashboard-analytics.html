{% extends "base.html" %}
{% load static %}

{% block main %}
    <main>
         <!-- page Title -->
        <div class="page-title-box">
            <h4 class="page-title">Analytics</h4>

            <div class="page-title-right">
                <div class="d-flex">
<!--                    <div class="input-group">-->
<!--                        <input type="date" class="form-control input" id="dash-daterange">-->
<!--                        <span class="input-group-text icon">-->
<!--                            <i class="bi bi-calendar"></i>-->
<!--                        </span>-->
<!--                    </div>-->
                    <a href="javascript: void(0);" class="btn">
                        <i class="bi bi-arrow-clockwise"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="container analytics">
            <div class="row">
                <div class="col">
                     <div class="card tilebox">
                    <div class="card-body">
                        <div class="card-data">
                            <div>
                            <h6>Active Users</h6>
                        <h2 class="my-2">{{active_users}}</h2>
                        </div>
                        <span>
                            <i class="bi bi-person-fill"></i>
                        </span>
                        </div>
                    </div>
                         <div class="card-footer">
                             <p class="text-muted">
                            <span class="text-success"><span class="mdi mdi-arrow-up-bold"></span> 5.27%</span>
                            <span class="text-nowrap">Since last month</span>
                        </p>
                         </div>
                </div>
                    <div class="card tilebox">
                    <div class="card-body">
                        <div class="card-data">
                            <div>
                            <h6>Order Stream</h6>
                        <h2 class="my-2">{{order_stream}}</h2>
                        </div>
                        <span>
                            <i class="bi bi-bag-fill"></i>
                        </span>
                        </div>
                    </div>
                         <div class="card-footer">
                             <p class="text-muted">
                            <span class="text-success"><span class="mdi mdi-arrow-up-bold"></span> 5.27%</span>
                            <span class="text-nowrap">Since last month</span>
                        </p>
                         </div>
                </div>
                </div>
                <div class="col">

                <div class="card">
                    <div class="chart" id="donutchart" style="width: 100%; height: 270px;">

                    </div>
                    <div class="labels">

                    </div>
                </div>
                </div>
                <div class="col">
                    <div class="card tilebox">
                    <div class="card-header">
                        <h3>Store Statistics(last 30 days)</h3>
                    </div>
                   <div class="card-body">
                        <ul>
                        <li>
                            <div class="card-data">
                                <div>
                                    <h6>Orders</h6>
                                    <h2>{{orders}}</h2>
                                </div>
                                <span><i class="bi bi-arrow-clockwise"></i></span>
                            </div>
                        </li>
                        <li>
                            <div class="card-data">
                                <div>
                                    <h6>Customers</h6>
                                    <h2>{{customers}}</h2>
                                </div>
                                <span><i class="bi bi-person-lines-fill"></i></span>
                            </div>
                        </li>
                        <li>
                            <div class="card-data">
                                <div>
                                    <h6>Items Sold</h6>
                                    <h2>{{items_sold}}</h2>
                                </div>
                                <span><i class="bi bi-grid-fill"></i></span>
                            </div>
                        </li>
                    </ul>
                   </div>
                </div>
                </div>
            </div>
        </div>
    </main>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
          const order_data = JSON.parse("{{order_stats|escapejs}}");
          console.log(order_data)
          const data = google.visualization.arrayToDataTable(order_data);

          const options = {
              title: 'My Daily Activities  ss',
              pieHole: 0.4,
          };

          const chart = new google.visualization.PieChart(document.getElementById('donutchart'));
          chart.draw(data, options);
      }
    </script>

{% endblock main %}